{% extends "layout.html" %}
{% block content %}

<style>
    .answer-wrapper {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        color: white;
        text-align: center;
    }

    /* CHARACTER */
    .character-section {
        margin-bottom: 25px;
    }

    .character-img {
        width: 240px;
        animation: float 4s ease-in-out infinite;
        filter: drop-shadow(0 0 22px #000);
    }

    @keyframes float {
        0% { transform: translateY(0); }
        50% { transform: translateY(-12px); }
        100% { transform: translateY(0); }
    }

    .character-name {
        margin-top: 10px;
        font-size: 1.6rem;
        font-weight: 600;
        color: #ffd86b;
        text-shadow: 0 0 10px #ffb300;
    }

    /* CARD */
    .answer-card {
        margin-top: 30px;
        background: rgba(255,255,255,0.12);
        padding: 30px;
        border-radius: 18px;
        backdrop-filter: blur(10px);
        text-align: left;
        box-shadow: 0 0 25px rgba(0,0,0,0.5);
        line-height: 1.65;
        font-size: 1.15rem;
    }

    .section-title {
        font-size: 1.4rem;
        color: #bfe6ff;
        margin-top: 25px;
        font-weight: 700;
        text-shadow: 0 0 10px #5ecbff;
    }

    .answer-card ul {
        padding-left: 20px;
        margin-top: 8px;
    }

    .answer-card li {
        margin-bottom: 6px;
    }

    /* BUTTON */
    .btn-back {
        display: inline-block;
        margin-top: 30px;
        padding: 14px 36px;
        background: #0059ff;
        color: white;
        font-size: 1.2rem;
        border-radius: 12px;
        text-decoration: none;
        box-shadow: 0 6px 18px rgba(0,0,0,0.3);
        transition: 0.25s ease;
    }

    .btn-back:hover {
        background: #2f74ff;
        transform: translateY(-3px);
    }
</style>


<div class="answer-wrapper fade-in">

    <!-- CHARACTER -->
    <div class="character-section">
        <img src="/static/characters/{{ character }}.png" class="character-img">
        <div class="character-name">{{ character.replace('_',' ').title() }}</div>
    </div>

    <!-- MAIN ANSWER -->
    <div class="answer-card">

        {# ----------------------------------------------------
           CASE 1: answer is a plain string (current behavior)
           ---------------------------------------------------- #}
        {% if answer is string %}
            <div class="section-title">üåü Here‚Äôs Your Answer</div>
            <p>{{ answer | safe }}</p>

            <div class="section-title">üß† Now You Try!</div>
            <p>Can you explain this in your own words, or make up your own example?</p>

            <div class="section-title">‚û° Want Help With Another Question?</div>
            <p>You can go back and explore more planets anytime.</p>

        {# ----------------------------------------------------
           CASE 2: answer is a dict with sections
           (future structured format)
           ---------------------------------------------------- #}
        {% elif answer is mapping %}

            {% if answer.overview %}
            <div class="section-title">üåü Overview</div>
            <p>{{ answer.overview }}</p>
            {% endif %}

            {% if answer.key_facts %}
            <div class="section-title">üìò Key Facts</div>
            {% if answer.key_facts is string %}
                <p>{{ answer.key_facts }}</p>
            {% else %}
                <ul>
                    {% for fact in answer.key_facts %}
                        <li>{{ fact }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% endif %}

            {% if answer.christian_view %}
            <div class="section-title">‚ú® Christian Viewpoint</div>
            <p>{{ answer.christian_view }}</p>
            {% endif %}

            {% if answer.agreement %}
            <div class="section-title">ü§ù Where Christian & Secular Views Agree</div>
            {% if answer.agreement is string %}
                <p>{{ answer.agreement }}</p>
            {% else %}
                <ul>
                    {% for item in answer.agreement %}
                        <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% endif %}

            {% if answer.difference %}
            <div class="section-title">üîç Where They Differ</div>
            {% if answer.difference is string %}
                <p>{{ answer.difference }}</p>
            {% else %}
                <ul>
                    {% for diff in answer.difference %}
                        <li>{{ diff }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% endif %}

            {% if answer.practice %}
            <div class="section-title">üß† Now You Try!</div>
            {% if answer.practice is string %}
                <p>{{ answer.practice }}</p>
            {% else %}
                <ul>
                    {% for q in answer.practice %}
                        <li>{{ q }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% endif %}

            <div class="section-title">‚û° Want Help With Another Question?</div>
            <p>You can go back and explore more planets anytime.</p>

        {% else %}
            {# super-defensive fallback #}
            <div class="section-title">üåü Here‚Äôs Your Answer</div>
            <p>{{ answer }}</p>
        {% endif %}

    </div>

    <a href="/subjects" class="btn-back">Ask Another Question</a>

</div>

{% endblock %}


