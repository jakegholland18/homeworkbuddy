{% extends "layout.html" %}
{% block content %}

<style>
    body {
        background: radial-gradient(circle at top, #0f1a2b, #000814);
        overflow-x: hidden;
        margin: 0;
        padding: 0;
        color: white;
    }

    .stars {
        position: absolute;
        inset: 0;
        background: url('/static/stars.png');
        background-size: cover;
        opacity: 0.45;
        animation: drift 50s linear infinite;
        z-index: -1;
    }

    @keyframes drift {
        from { transform: translateY(0); }
        to { transform: translateY(-1300px); }
    }

    .dashboard-wrapper {
        max-width: 1100px;
        margin: 0 auto;
        padding: 40px 20px 80px;
        text-align: center;
    }

    .page-title {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 20px;
        color: #cfe8ff;
        text-shadow: 0 0 20px rgba(130,180,255,0.8);
    }

    .character-section {
        margin-top: 40px;
        margin-bottom: 40px;
    }

    .character-img {
        width: 260px;
        height: auto;
        animation: float 4s ease-in-out infinite;
        filter: drop-shadow(0 0 25px rgba(0,0,0,0.6));
    }

    @keyframes float {
        0% { transform: translateY(0); }
        50% { transform: translateY(-12px); }
        100% { transform: translateY(0); }
    }

    .character-name {
        font-size: 1.8rem;
        margin-top: 12px;
        color: #ffd86a;
        text-shadow: 0 0 12px #ffb84c;
    }

    .btn-main {
        margin-top: 18px;
        display: inline-block;
        padding: 14px 40px;
        font-size: 1.25rem;
        color: white;
        background: #0059ff;
        border-radius: 12px;
        text-decoration: none;
        transition: 0.3s ease;
        box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }

    .btn-main:hover {
        background: #2f74ff;
        transform: translateY(-3px);
    }

    .stats-grid {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 50px;
        flex-wrap: wrap;
    }

    .stat-box {
        background: rgba(255,255,255,0.1);
        border: 1px solid rgba(160,200,255,0.35);
        padding: 25px 40px;
        border-radius: 18px;
        backdrop-filter: blur(6px);
        width: 200px;
        text-align: center;
        transition: 0.25s ease;
    }

    .stat-box:hover {
        transform: translateY(-6px) scale(1.05);
        box-shadow: 0 0 18px rgba(160,200,255,0.5);
    }

    .section-title {
        margin-top: 70px;
        margin-bottom: 20px;
        font-size: 2rem;
        color: #cfe8ff;
        text-shadow: 0 0 15px rgba(130,180,255,0.6);
    }

    .missions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 25px;
        padding-bottom: 50px;
    }

    .mission-card {
        background: rgba(255,255,255,0.08);
        padding: 25px 20px;
        border-radius: 16px;
        border: 1px solid rgba(140,180,255,0.3);
        backdrop-filter: blur(6px);
        text-decoration: none;
        color: #e6f1ff;
        transition: 0.25s ease;
    }

    .mission-card:hover {
        transform: translateY(-6px) scale(1.05);
        box-shadow: 0 0 16px rgba(160,200,255,0.5);
    }
</style>

<div class="stars"></div>

<div class="dashboard-wrapper fade-in">

    <h1 class="page-title">Student Dashboard</h1>

    {% if character %}
    <div class="character-section">
        <img src="/static/characters/{{ character }}.png" class="character-img">
        <div class="character-name">{{ character.replace('_',' ').title() }}</div>

        <!-- FIXED ROUTE -->
        <a href="/subjects" class="btn-main">Begin Learning</a>
    </div>
    {% endif %}

    <div class="stats-grid">
        <div class="stat-box"><h3>XP</h3><p>{{ xp }}</p></div>
        <div class="stat-box"><h3>Level</h3><p>{{ level }}</p></div>
        <div class="stat-box"><h3>Tokens</h3><p>{{ tokens }}</p></div>
        <div class="stat-box"><h3>Streak</h3><p>{{ streak }} Days</p></div>
    </div>

    <h2 class="section-title">Todayâ€™s Missions</h2>

    <div class="missions-grid">
        <a href="/ask-question?subject=num_forge" class="mission-card">
            <h3>Math Mission</h3><p>Solve a new challenge.</p>
        </a>

        <a href="/ask-question?subject=story_verse" class="mission-card">
            <h3>Reading Adventure</h3><p>Summaries and decoding.</p>
        </a>

        <a href="/ask-question?subject=ink_haven" class="mission-card">
            <h3>Writing Quest</h3><p>Practice and feedback.</p>
        </a>

        <a href="/ask-question?subject=atom_sphere" class="mission-card">
            <h3>Science Lab</h3><p>Ask about experiments.</p>
        </a>

        <a href="/ask-question?subject=chrono_core" class="mission-card">
            <h3>History Quest</h3><p>Explore the past.</p>
        </a>

        <a href="/ask-question?subject=faith_realm" class="mission-card">
            <h3>Faith Realm</h3><p>Ask Bible questions.</p>
        </a>
    </div>

</div>

{% endblock %}
