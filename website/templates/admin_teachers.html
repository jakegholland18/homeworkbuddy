<!DOCTYPE html>
<html>
<head>
    <title>Teachers ‚Äî Admin ‚Äî CozmicLearning</title>
    <link rel="stylesheet" href="/static/style.css?v=20251202">
    <style>
        body { margin: 0; padding: 0; background: var(--bg-gradient-main); font-family: "Poppins", sans-serif; color: white; }
        .stars { position: fixed; inset: 0; background: url('/static/stars.png'); background-size: cover; opacity: 0.25; z-index: -1; animation: drift 65s linear infinite; }
        @keyframes drift { from { transform: translateY(0); } to { transform: translateY(-2200px); } }

        .sidebar { width: 260px; height: 100vh; background: rgba(0,0,0,0.45); backdrop-filter: blur(14px); border-right: 1px solid rgba(255,255,255,0.12); position: fixed; top: 0; left: 0; padding: 30px 20px; }
        .sidebar h2 { margin: 0 0 40px; font-size: 1.7rem; text-align: center; color: #bfe6ff; text-shadow: 0 0 12px rgba(255,255,255,0.4); }
        .nav-link { display: block; padding: 14px 18px; border-radius: 12px; color: white; margin-bottom: 12px; text-decoration: none; background: rgba(255,255,255,0.05); transition: 0.25s; }
        .nav-link:hover { background: rgba(255,255,255,0.15); transform: translateX(4px); }
        .nav-link.active { background: rgba(255,255,255,0.2); }
        .logout { margin-top: 40px; background: rgba(255,100,100,0.25); }
        .logout:hover { background: rgba(255,100,100,0.4); }

        .main { margin-left: 280px; padding: 40px; height: calc(100vh - 80px); overflow-y: auto; }
        .page-title { font-size: 2.3rem; margin-bottom: 25px; color: #cfe8ff; }

        .search-bar { margin-bottom: 20px; display: flex; gap: 12px; }
        .search-bar input { padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; flex: 1; }
        .search-bar button { padding: 12px 24px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); border: none; border-radius: 10px; color: white; cursor: pointer; }

        table { width: 100%; background: rgba(255,255,255,0.05); border-radius: 14px; overflow: hidden; }
        th { background: rgba(255,255,255,0.1); padding: 15px; text-align: left; }
        td { padding: 12px 15px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        tr:hover { background: rgba(255,255,255,0.08); }
        .btn-view { padding: 6px 14px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-radius: 8px; text-decoration: none; color: white; font-size: 0.9rem; }
        .status-badge { padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; display: inline-block; }
        .status-active { background: rgba(0,255,100,0.2); color: #00ff80; }
        .status-inactive { background: rgba(255,50,50,0.2); color: #ff6b6b; }

        .pagination { margin-top: 20px; display: flex; gap: 8px; justify-content: center; }
        .pagination a, .pagination span { padding: 8px 14px; background: rgba(255,255,255,0.1); border-radius: 8px; text-decoration: none; color: white; }
        .pagination .current { background: linear-gradient(135deg, var(--accent), var(--accent-2)); }
    </style>
</head>
<body>
<div class="stars"></div>

<div class="sidebar">
    <h2>Admin Panel</h2>
    <a class="nav-link" href="/admin">üìä Dashboard</a>
    <a class="nav-link" href="/admin/students">üë• Students</a>
    <a class="nav-link active" href="/admin/teachers">üë®‚Äçüè´ Teachers</a>
    <a class="nav-link" href="/admin/parents">üë™ Parents</a>
    <a class="nav-link" href="/admin/assignments">üìù Assignments</a>
    <a class="nav-link" href="/admin/moderation">üõ°Ô∏è Content Moderation</a>
    <a class="nav-link logout" href="/admin_logout">Log Out</a>
</div>

<div class="main">
    <div class="page-title">All Teachers</div>

    <form class="search-bar" method="GET">
        <input type="text" name="search" placeholder="Search by name or email..." value="{{ search }}">
        <button type="submit">Search</button>
    </form>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Plan</th>
                <th>Status</th>
                <th>Classes</th>
                <th>Joined</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for teacher in teachers %}
            <tr>
                <td>{{ teacher.name }}</td>
                <td>{{ teacher.email }}</td>
                <td>{{ teacher.plan or 'free' }}</td>
                <td>
                    {% if teacher.subscription_active %}
                    <span class="status-badge status-active">Active</span>
                    {% else %}
                    <span class="status-badge status-inactive">Inactive</span>
                    {% endif %}
                </td>
                <td>{{ teacher.classes|length if teacher.classes else 0 }}</td>
                <td>{{ teacher.created_at.strftime('%Y-%m-%d') if teacher.created_at else 'N/A' }}</td>
                <td><a href="/admin/teacher/{{ teacher.id }}" class="btn-view">View Details</a></td>
            </tr>
            {% else %}
            <tr><td colspan="7" style="text-align: center; padding: 40px;">No teachers found.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    {% if pagination.pages > 1 %}
    <div class="pagination">
        {% if pagination.has_prev %}
        <a href="?page={{ pagination.prev_num }}&search={{ search }}">¬´ Prev</a>
        {% endif %}

        {% for page in pagination.iter_pages() %}
            {% if page %}
                {% if page == pagination.page %}
                    <span class="current">{{ page }}</span>
                {% else %}
                    <a href="?page={{ page }}&search={{ search }}">{{ page }}</a>
                {% endif %}
            {% endif %}
        {% endfor %}

        {% if pagination.has_next %}
        <a href="?page={{ pagination.next_num }}&search={{ search }}">Next ¬ª</a>
        {% endif %}
    </div>
    {% endif %}

    <div style="margin-top: 20px; opacity: 0.6; font-size: 0.9rem;">
        Showing {{ teachers|length }} of {{ pagination.total }} teachers
    </div>
</div>

</body>
</html>
