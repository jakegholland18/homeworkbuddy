<!DOCTYPE html>
<html>
<head>
    <title>Assignments</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="fade-in">

<div class="page-title">Assigned Practice Sets</div>

<div class="content-box">

   {% for cls in classes %}
    <h2>{{ cls.class_name }} â€” Grade {{ cls.grade_level }}</h2>

    <!-- FIXED: correct create assignment route -->
    <a href="/teacher/assignments/create?class_id={{ cls.id }}" class="btn-blue">
        + Create New Assignment
    </a>

    {% set assignments = assignment_map[cls.id] %}

    {% if assignments %}
        <div class="assignment-list">
            {% for a in assignments %}
                <div class="assignment-item">
                    <h3>{{ a.title }}</h3>
                    <p><strong>Subject:</strong> {{ a.subject }}</p>
                    <p><strong>Topic:</strong> {{ a.topic }}</p>

                    {% if a.due_date %}
                        <p><strong>Due:</strong> {{ a.due_date.strftime("%b %d, %Y") }}</p>
                    {% endif %}

                    <!-- FIXED: correct route for viewing assignment -->
                    <a class="btn-light" href="/teacher/assignments/{{ a.id }}">
                        View / Manage
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No assigned practice sets yet.</p>
    {% endif %}

{% endfor %}

</div>

</body>
</html>
